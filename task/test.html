<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <style>
        #questionAppearance{
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            width: 50%;
            margin-left: 1em;
            margin-top: 0.5em;;
        }
        #questionNumber{
            font-weight: bold;
        }
        #questions{
            background-color: rgb(224, 224, 224);
        }
        #answer{
            margin-top: 1em;
            width: 10%;
            height: 25px;
        }
    </style>
</head>
<body>
    <div id="questionAppearance">
        <h3 id="questionNumber">p</h3>
        <div id="questions">
            
        </div>
        <button id="answer">Ответить</button>
        <p id="timer"></p>
    </div>
    
    <script>
        let questionNumberJS = document.querySelector("#questionNumber");
        let questionsJS = document.querySelector("#questions");
        let answerJS = document.querySelector("#answer");
        let timerJS = document.querySelector("#timer");

        let testData = [
            {
                testQuestions: "Для чего можна использовать JavaScript?",
                testAnswers: [
                    "Для создания самостоятельной исполняемой программы",
                    "Для обработки событий на web-странице",
                    "Для добавления динамики и 'интелекта' в web-страницу",
                    "Все варианты верны"
                ],
                correctAnswer: [3]
            },
            {
                testQuestions: "Где обычно выполняется JavaScript-код?",
                testAnswers: [
                    "В браузере",
                    "В текстовом редакторе",
                    "В графическом редакторе",
                    "В файловой системе"
                ],
                correctAnswer: [0]
            },
            {
                testQuestions: "Какое расширение обычно имеет JavaScript-файл?",
                testAnswers: [
                    ".js",
                    ".java",
                    ".jvs",
                    ".script"
                ],
                correctAnswer: [0]
            },
            {
                testQuestions: "Каким тегом подключают JavaScript на веб-странице?",
                testAnswers: [
                    "<javascript>",
                    "<script>",
                    "<js>",
                    "<code>"
                ],
                correctAnswer: [1]
            },
            {
                testQuestions: "Что такое переменная в JavaScript?",
                testAnswers: [
                    "Участок памяти для хранения данных",
                    "Тип данных",
                    "Функция",
                    "Оператор условия"
                ],
                correctAnswer: [0]
            },
            {
                testQuestions: "Каким ключевым словом объявляют переменную?",
                testAnswers: [
                    "var, let, const",
                    "make",
                    "new",
                    "object"
                ],
                correctAnswer: [0]
            },
            {
                testQuestions: "Что такое функция в JavaScript?",
                testAnswers: [
                    "Специальный тип переменной",
                    "Команда для вывода данных",
                    "Блок кода, который можно вызывать многократно",
                    "Инструмент для работы с CSS"
                ],
                correctAnswer: [2]
            },
            {
                testQuestions: "Какой метод выводит сообщение в консоль?",
                testAnswers: [
                    "print()",
                    "console.log()",
                    "alert()",
                    "message()"
                ],
                correctAnswer: [1]
            },
            {
                testQuestions: "Какой оператор используется для сравнения значений с учётом типа?",
                testAnswers: [
                    "==",
                    "=",
                    "===",
                    "!="
                ],
                correctAnswer: [2]
            },
            {
                testQuestions: "Какой метод используют для получения элемента по ID?",
                testAnswers: [
                    "getElement()",
                    "query()",
                    "getElementById()",
                    "findId()"
                ],
                correctAnswer: [2]
            },
            {
                testQuestions: "Что делает оператор if?",
                testAnswers: [
                    "Повторяет блок кода",
                    "Проверяет условие и выполняет код при истинности",
                    "Объявляет функцию",
                    "Подключает модуль"
                ],
                correctAnswer: [1]
            },
            {
                testQuestions: "Где обычно выполняется JavaScript-код?",
                testAnswers: [
                    "В браузере",
                    "В текстовом редакторе",
                    "В графическом редакторе",
                    "В файловой системе"
                ],
                correctAnswer: [0]
            }
        ];
        let currentQuestion = 0;
        let timeCounter = 10;
        Show();
        Timer();

        let allCheckboxs = document.querySelectorAll("#questions #blockCheckbox")

        function Show(){
            questionsJS.innerHTML = "";

            let q = testData[currentQuestion];
            questionNumberJS.textContent = `Вопрос ${currentQuestion + 1} из ${testData.length}`;
            questionsJS.textContent = q.testQuestions;

            for (let i = 0; i < q.testAnswers.length; i++){
                    let blockForCheckbox = document.createElement("div");
                    blockForCheckbox.id  = "blockCheckbox";

                    let testCheckboxAnswer = document.createElement("input");
                    testCheckboxAnswer.type = "checkbox";
                    testCheckboxAnswer.name = "sameName";
                    testCheckboxAnswer.value = i;

                    let labelCheckbox = document.createElement("label");
                    labelCheckbox.textContent = q.testAnswers[i];

                    blockForCheckbox.append(testCheckboxAnswer, labelCheckbox);
                    questionsJS.append(blockForCheckbox);
            }
        }

        answerJS.addEventListener("click", function() {
            let selected = Array.from(document.querySelectorAll(".testAnswer"))
            .filter(cb => cb.checked)
            .map(cb => Number(cb.value));

            let correct = testData[currentQuestion].correctAnswer;

            let ok = selected.length === correct.length && selected.every(v => correct.includes(v));

            if (ok){
                alert("Correct");
            }
            else{
                alert("Incorrect");
            }
            currentQuestion++;

            if(currentQuestion < testData.length){
                Show();
            }
            else {
                alert("Test is over");
            }
        })

        function Timer(){
            timerJS.textContent = `Осталось ${timeCounter} секунд`;
            timeCounter--;
            if (timeCounter < 0){
                clearInterval();
            }
            setTimeout(Timer, 1000);
        }
    </script>
</body>
</html>